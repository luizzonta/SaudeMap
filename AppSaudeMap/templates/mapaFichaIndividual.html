{% extends "base.html" %}

{% block title %}Mapeamento Doenças{% endblock %}

{% block conteudo %}

{% load static %}

	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDsg5LPmELH07eibxjKD891fOi-ENsxW_E" type="text/javascript"></script>
	<script src="http://cdn.sobekrepository.org/includes/gmaps-markerwithlabel/1.9.1/gmaps-markerwithlabel-1.9.1.js" type="text/javascript"></script>

	<div class="container">
		<div class="row" >
			<div class="col-sm-2">
				<img class="img-fluid" class="img-thumbnail" src="{% static 'img/esus.jpg'%}" width="300" height="168" alt="Logotipo eSus"> 
			</div>
			<div class="col-sm-10">
				<br>
				<h1 class="text-center">
					<p>Mapeamento Doenças</p>
				</h1>
			</div>
			<div class="col-sm-3">
				<br>
			</div>
		</div>
	</div>
 
	<div class="container">
		<div class="row" >
			<div class="col-sm-3">
				<br>
				<form>
					<div class="form-check">
					<h6>	
					    <input type="checkbox" class="form-check-input" id="hipertensaoArterial" OnClick="initMap()">
					    <label class="form-check-label" for="hipertensaoArterial">Hipertensão Arterial</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="diabetes" OnClick="initMap()">
					    <label class="form-check-label" for="diabetes">Diabetes</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="avcDerrame" OnClick="initMap()">
					    <label class="form-check-label" for="avcDerrame">AVC/Derrame</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="infarto" OnClick="initMap()">
					    <label class="form-check-label" for="infarto">Infarto</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="doencaCardiaca" OnClick="initMap()">
					    <label class="form-check-label" for="doencaCardiaca">Cardiaca/coração</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins" OnClick="initMap()">
					    <label class="form-check-label" for="problemaRins">Problema Rins</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins" OnClick="initMap()">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins" OnClick="initMap()">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
						<br>
					    <input type="checkbox" class="form-check-input" id="problemaRins">
					    <label class="form-check-label" for="problemaRins">.....</label>
					</h6>
					</div>
					<br>
					<a href="#"><button type="button" class="btn btn-primary"><i class="fa fa-plus-circle"></i> Enviar</button></a>
					<a href="{% url 'index' %}"><button type="button" class="btn btn-danger"><i class="fa fa-arrow-circle-left"></i> Voltar</button></a>

				</form>
			</div>
			<div class="col-sm-9">
				<div id="map"></div>
				<script>
				function initMap() {
					var bp = {lat: -27.031, lng: -50.908};
					var map = new google.maps.Map(document.getElementById('map'), {
				    zoom: 15,
				    center: bp
				});

				var locations = [
					{% for FichaDoencas in FichaDoenca %}
						{% if FichaDoencas.hipertensaoArterial == 'Sim' %}
						['{{ FichaDoencas.nomeCompleto }}', {{ FichaDoencas.latitude }}, {{ FichaDoencas.longitude }}, 'green', 1, -1],
						{% endif %}

						{% if FichaDoencas.diabetes == 'Sim' %}
							['{{ FichaDoencas.nomeCompleto }}', {{ FichaDoencas.latitude }}, {{ FichaDoencas.longitude }}, 'red', 2, -2],
						{% endif %}

						{% if FichaDoencas.avcDerrame == 'Sim' %}
							['{{ FichaDoencas.nomeCompleto }}', {{ FichaDoencas.latitude }}, {{ FichaDoencas.longitude }}, 'yellow', 3, -3],
						{% endif %}

						{% if FichaDoencas.infarto == 'Sim' %}
							['{{ FichaDoencas.nomeCompleto }}', {{ FichaDoencas.latitude }}, {{ FichaDoencas.longitude }}, 'blue', 4, -4],
						{% endif %}

						{% if FichaDoencas.doencaCardiaca == 'Sim' %}
							['{{ FichaDoencas.nomeCompleto }}', {{ FichaDoencas.latitude }}, {{ FichaDoencas.longitude }}, 'pink', 4, -4],
						{% endif %}

						{% if FichaDoencas.problemaRins == 'Sim' %}
							['{{ FichaDoencas.nomeCompleto }}', {{ FichaDoencas.latitude }}, {{ FichaDoencas.longitude }}, 'purple', 5, -5],
						{% endif %}
					{% endfor %}
				];	

				var green = ' ';
				var red = ' '; 
				var yellow = ' '; 
				var blue = ' '; 
				var pink = ' '; 
				var purple = ' '; 

				var hipertensaoArterial = document.getElementById("hipertensaoArterial");
				if (hipertensaoArterial.checked == true){
					green = '/static/img/green.png';
				}
				var diabetes = document.getElementById("diabetes");
				if (diabetes.checked == true){
					red = '/static/img/red.png';
				}	
				var avcDerrame = document.getElementById("avcDerrame");
				if (avcDerrame.checked == true){
					yellow = '/static/img/yellow.png';
				}	
				var infarto = document.getElementById("infarto");
				if (infarto.checked == true){
					blue = '/static/img/blue.png';
				}	
				var doencaCardiaca = document.getElementById("doencaCardiaca");
				if (doencaCardiaca.checked == true){
					pink = '/static/img/pink.png';
				}	
				var problemaRins = document.getElementById("problemaRins");
				if (problemaRins.checked == true){
					purple = '/static/img/purple.png';
				}	
						
				var icons = {
					'green': {
						url: green,
					},
					'red': {
						url: red,
					},
					'yellow': {
						url: yellow,
					},
					'blue': {
						url: blue,
					},
					'pink': {
						url: pink,
					},
					'purple': {
						url: purple,
					}
				};

				   var image = 'https://fonts.googleapis.com/icon?family=Material+Icons';
				   for (var i = 0; i < locations.length; i++) {
				     var item = locations[i];
				     var marker = new MarkerWithLabel({
				       position: {lat: item[1] + item[4]/100000, lng: item[2] + item[5]/100000},
				       map: map,
				       icon: icons[item[3]].url,
				       labelAnchor: new google.maps.Point(item[4], item[5]),
				     });
				   }
				 }
				initMap();
				
				</script>

<!--
				<script>
			         function loadMap() {
			            var mapOptions = {
			               center:new google.maps.LatLng(-27.0316573, -50.9082924),
			               zoom:15
			            }
			            
			            var map = new google.maps.Map(document.getElementById("sample"),mapOptions);
			            
			            var marker = new google.maps.Marker({
			               position: new google.maps.LatLng(-27.0387500, -50.9069900),
			               map: map,
			               draggable:true,
			               icon:'/static/img/blue.png',
			            });
			            marker.setMap(map);
			
			            var map = new google.maps.Map(document.getElementById("sample"),mapOptions);
			            
			            var marker = new google.maps.Marker({
			               position: new google.maps.LatLng(-27.0347500, -50.9069900),
			               map: map,
			               draggable:true,
			               icon:'/static/img/red.png',
			            });
			            marker.setMap(map);
			
			         }
				</script>
				<body onload = "loadMap()">
				   <div id = "sample" style = "width:780px; height:600px;" align="center"></div>
				</body>
-->							

			</div>
		</div>
	</div>


<!-- Exemplo em javascript com SQLite: https://www.youtube.com/watch?v=7znA5k7gJqQ -->
 
{% endblock %}